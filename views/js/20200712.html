<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>移动端开发 | xuks</title>
    <meta name="description" content="better late than never">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.aa8eed3e.css" as="style"><link rel="preload" href="/assets/js/app.25bd69c4.js" as="script"><link rel="preload" href="/assets/js/4.6e0585f6.js" as="script"><link rel="preload" href="/assets/js/1.de0b2451.js" as="script"><link rel="preload" href="/assets/js/16.acb599d0.js" as="script"><link rel="prefetch" href="/assets/js/10.d79d4537.js"><link rel="prefetch" href="/assets/js/11.ce91667a.js"><link rel="prefetch" href="/assets/js/12.92dce66d.js"><link rel="prefetch" href="/assets/js/13.fc50a8ba.js"><link rel="prefetch" href="/assets/js/14.68e950fd.js"><link rel="prefetch" href="/assets/js/15.d1196c16.js"><link rel="prefetch" href="/assets/js/17.378ae7bb.js"><link rel="prefetch" href="/assets/js/18.d3bd3afa.js"><link rel="prefetch" href="/assets/js/19.dbc911d5.js"><link rel="prefetch" href="/assets/js/20.822e2610.js"><link rel="prefetch" href="/assets/js/21.cefc375b.js"><link rel="prefetch" href="/assets/js/5.c5d97cf4.js"><link rel="prefetch" href="/assets/js/6.539055ff.js"><link rel="prefetch" href="/assets/js/7.2f9bbe21.js"><link rel="prefetch" href="/assets/js/8.501095af.js"><link rel="prefetch" href="/assets/js/9.09d29e4c.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.d17d02f4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aa8eed3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/head.png" alt="xuks" class="logo"> <span class="site-name">xuks</span></a> <div class="links"><div class="color-picker"><a href="#" class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/html.html" class="nav-link"><i class="iconfont undefined"></i>
  html
</a></li><li class="dropdown-item"><!----> <a href="/category/css.html" class="nav-link"><i class="iconfont undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/category/js.html" class="nav-link"><i class="iconfont undefined"></i>
  js
</a></li><li class="dropdown-item"><!----> <a href="/category/webpack.html" class="nav-link"><i class="iconfont undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/category/Other.html" class="nav-link"><i class="iconfont undefined"></i>
  Other
</a></li><li class="dropdown-item"><!----> <a href="/category/vue.html" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.im/user/2189882894324135" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/xukaishan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/a6ccd6700041" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43594899" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://home.cnblogs.com/u/1522663/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/html.html" class="nav-link"><i class="iconfont undefined"></i>
  html
</a></li><li class="dropdown-item"><!----> <a href="/category/css.html" class="nav-link"><i class="iconfont undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/category/js.html" class="nav-link"><i class="iconfont undefined"></i>
  js
</a></li><li class="dropdown-item"><!----> <a href="/category/webpack.html" class="nav-link"><i class="iconfont undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/category/Other.html" class="nav-link"><i class="iconfont undefined"></i>
  Other
</a></li><li class="dropdown-item"><!----> <a href="/category/vue.html" class="nav-link"><i class="iconfont undefined"></i>
  vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.im/user/2189882894324135" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/xukaishan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/a6ccd6700041" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43594899" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://home.cnblogs.com/u/1522663/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>移动端开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/js/20200712.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/js/20200712.html#基本知识" class="sidebar-link">基本知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/js/20200712.html#viewport视口" class="sidebar-link">viewport视口</a></li><li class="sidebar-sub-header"><a href="/views/js/20200712.html#物理像素-physical-pixel" class="sidebar-link">物理像素(physical pixel)</a></li><li class="sidebar-sub-header"><a href="/views/js/20200712.html#独立像素dip-device-independent-pixel" class="sidebar-link">独立像素DIP(Device independent Pixel)</a></li><li class="sidebar-sub-header"><a href="/views/js/20200712.html#设备像素比dpr-device-pixels-ratio" class="sidebar-link">设备像素比DPR(device pixels ratio)</a></li></ul></li><li><a href="/views/js/20200712.html#适配方案" class="sidebar-link">适配方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/js/20200712.html#百分比-媒体查询" class="sidebar-link">百分比&amp;媒体查询</a></li><li class="sidebar-sub-header"><a href="/views/js/20200712.html#rem方案" class="sidebar-link">rem方案</a></li><li class="sidebar-sub-header"><a href="/views/js/20200712.html#vw-vh方案" class="sidebar-link">vw/vh方案</a></li></ul></li><li><a href="/views/js/20200712.html#其他" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/js/20200712.html#_1px问题" class="sidebar-link">1px问题</a></li><li class="sidebar-sub-header"><a href="/views/js/20200712.html#_300ms-延迟" class="sidebar-link">300ms 延迟</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>移动端开发</h1> <hr> <div data-v-0b496ca7><i class="iconfont reco-account" data-v-0b496ca7><span data-v-0b496ca7>xuks</span></i> <i class="iconfont reco-date" data-v-0b496ca7><span data-v-0b496ca7>2020-7-12</span></i> <!----> <i class="iconfont reco-tag tags" data-v-0b496ca7><span class="tag-item" data-v-0b496ca7>
      移动端
    </span></i></div></div> <div class="content__default"><h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>web移动端也就是我们常说的H5页面，现如今手机屏幕尺寸不一，我们在开发中需要对不同型号及尺寸的手机屏幕做相应的适配，
以保证它们所表现出基本一致的显示效果。
下文将主要介绍web移动端一些基本知识和常见的适配方案以及移动端需要注意的问题。</p> <h2 id="基本知识"><a href="#基本知识" aria-hidden="true" class="header-anchor">#</a> 基本知识</h2> <h3 id="viewport视口"><a href="#viewport视口" aria-hidden="true" class="header-anchor">#</a> viewport视口</h3> <ul><li>visual viewport：屏幕的可视区域，即物理像素尺寸（window.innerWidth）</li> <li>layout viewport：布局视口，即DOM宽度（document.documentElement.clientWidth），移动设备默认的viewport，默认的布局视口宽度要远大于屏幕宽度</li> <li>idea viewport：理想适口，使布局视口就是可见视口（visual viewport宽度 = ideal viewport宽度 / scale缩放值）</li></ul> <p>如何进行视口设置呢？</p> <p>我们需要不允许用户手动缩放，设置缩放值为1，即visual viewport宽度 = ideal viewport宽度</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, inital-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="物理像素-physical-pixel"><a href="#物理像素-physical-pixel" aria-hidden="true" class="header-anchor">#</a> 物理像素(physical pixel)</h3> <p>物理像素又被称为设备像素，单位是px，比如iPhone6的 (750 x 1334px) 常说的一倍屏、二倍屏（Retina）、三倍屏，指的是设备以多少物理像素来显示一个CSS像素</p> <h3 id="独立像素dip-device-independent-pixel"><a href="#独立像素dip-device-independent-pixel" aria-hidden="true" class="header-anchor">#</a> 独立像素DIP(Device independent Pixel)</h3> <p>设备独立像素，也称为逻辑像素。
CSS像素就可以看做是设备的独立像素，例如，在Retina屏的iphone上，devicePixelRatio的值为2，也就是说1个css像素相当于2个物理像素，2x2个像素当1个像素使用，这样一组被称作“设备独立像素”，因此有如下关系：</p> <p>CSS像素 = 设备独立像素 = 逻辑像素</p> <h3 id="设备像素比dpr-device-pixels-ratio"><a href="#设备像素比dpr-device-pixels-ratio" aria-hidden="true" class="header-anchor">#</a> 设备像素比DPR(device pixels ratio)</h3> <p>是指在移动开发中1个css像素占用多少设备像素，如2代表1个css像素用2x2个设备像素来绘制。在移动端浏览器中以及某些桌面浏览器中，window对象有一个devicePixelRatio属性，它的官方的定义为：设备物理像素和设备独立像素的比例，也就是 devicePixelRatio = 物理像素 / 独立像素。
DPR = 物理像素(设备像素) / 逻辑像素(css像素/设备独立像素)</p> <h2 id="适配方案"><a href="#适配方案" aria-hidden="true" class="header-anchor">#</a> 适配方案</h2> <h3 id="百分比-媒体查询"><a href="#百分比-媒体查询" aria-hidden="true" class="header-anchor">#</a> 百分比&amp;媒体查询</h3> <p>媒体查询至少需要进行如下设置：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>最常见的媒体查询</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* iPhone5 */</span>
@media screen <span class="token function">and</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token operator">-</span>width<span class="token punctuation">:</span> <span class="token number">320</span>px</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
 
<span class="token comment">/* mi5/5s/6 */</span>
@media screen <span class="token function">and</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token operator">-</span>width<span class="token punctuation">:</span> <span class="token number">360</span>px</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
 
<span class="token comment">/* iPhone6/7/8/X */</span>
@media screen <span class="token function">and</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token operator">-</span>width<span class="token punctuation">:</span> <span class="token number">375</span>px</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
 
<span class="token comment">/* iPhone6/7/8 Plus */</span>
@media screen <span class="token function">and</span><span class="token punctuation">(</span><span class="token parameter">min<span class="token operator">-</span>width<span class="token punctuation">:</span> <span class="token number">414</span>px</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="rem方案"><a href="#rem方案" aria-hidden="true" class="header-anchor">#</a> rem方案</h3> <ul><li>rem （font size of the root element）相对于根元素(即html元素)font-size计算值，即 1rem = html中设置的font-size</li></ul> <p>原理：主要通过js动态修改 html 的 fontSize</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * 动态计算根元素fontSize
 */</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">doc<span class="token punctuation">,</span> win</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> docEl <span class="token operator">=</span> doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>
        resizeEvt <span class="token operator">=</span> <span class="token string">'orientationchange'</span> <span class="token keyword">in</span> window <span class="token operator">?</span> <span class="token string">'orientationchange'</span> <span class="token punctuation">:</span> <span class="token string">'resize'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">recalc</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> clientWidth <span class="token operator">=</span> docEl<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>clientWidth<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token punctuation">(</span>clientWidth <span class="token operator">/</span> <span class="token number">750</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>doc<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    win<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>resizeEvt<span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    doc<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> recalc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>postcss-plugin-px2rem</li></ul> <p>推荐在项目中使用自动转换插件，例如postcss-plugin-px2rem，它能自动的帮我们实现px到rem的转换，从此解放人脑计算，艾玛真香！推荐配合 autoprefixer 使用，添加浏览器前缀到CSS（某些第三方库样式错乱）如vue-cli3中配置：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// vue.config.js</span>
loaderOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    postcss<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 推荐配合使用 autoprefixer 添加浏览器前缀到CSS</span>
                <span class="token comment">// browsers: ['last 20 versions'],</span>
                overrideBrowserslist<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'last 20 versions'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 记得这里要把 browsers 改为 overrideBrowserslist，autoprefixer 新版本的写法有变</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-plugin-px2rem'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                rootValue<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">//换算基数</span>
                exclude<span class="token punctuation">:</span> <span class="token regex">/(node_module)/</span><span class="token punctuation">,</span>  <span class="token comment">//排除前端UI框架内的px也转换成rem</span>
                mediaQuery<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">//允许在媒体查询中转换px。</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="vw-vh方案"><a href="#vw-vh方案" aria-hidden="true" class="header-anchor">#</a> vw/vh方案</h3> <p>vh、vw方案即将视觉视口宽度 window.innerWidth和视觉视口高度 window.innerHeight 等分为 100 份。和rem类似也是相当麻烦需要做单位转化，
推荐插件 postcss-px-to-viewport 自动实现px到vw的转化</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// vue.config.js</span>
loaderOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    postcss<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 推荐配合使用 autoprefixer 添加浏览器前缀到CSS</span>
                <span class="token comment">// browsers: ['last 20 versions'],</span>
                overrideBrowserslist<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'last 20 versions'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 记得这里要把 browsers 改为 overrideBrowserslist，autoprefixer 新版本的写法有变</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-px-to-viewport'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        		viewportWidth<span class="token punctuation">:</span> <span class="token number">375</span><span class="token punctuation">,</span> <span class="token comment">//视口宽度</span>
        		viewportHeight<span class="token punctuation">:</span> <span class="token number">1334</span><span class="token punctuation">,</span> <span class="token comment">//视口高度</span>
        		unitPrecision<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">//设置的保留小数位数</span>
        		viewportUnit<span class="token punctuation">:</span> <span class="token string">'vw'</span><span class="token punctuation">,</span> <span class="token comment">//设置要转换的单位</span>
        		selectorBlackList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.box'</span><span class="token punctuation">,</span> <span class="token string">'.wrapper'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//不需要进行转换的类名</span>
                minPixelValue<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//设置要替换的最小像素值</span>
                mediaQuery<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">//允许在媒体查询中转换px</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="其他"><a href="#其他" aria-hidden="true" class="header-anchor">#</a> 其他</h2> <h3 id="_1px问题"><a href="#_1px问题" aria-hidden="true" class="header-anchor">#</a> 1px问题</h3> <p>1px在Retina屏下不仅仅是一个像素点。css中一个1x1的点，在dpr为2时是2x2的点, 在dpr为3时是3x3的点, 这就会导致某些边框看起来比较粗。解决方案是对边框进行缩放：transform: scale(0.5)</p> <h3 id="_300ms-延迟"><a href="#_300ms-延迟" aria-hidden="true" class="header-anchor">#</a> 300ms 延迟</h3> <p>移动浏览器 会在 touchend 和 click 事件之间，等待 300 - 350 ms，判断用户是否会进行双击手势用以缩放文字。</p> <p>解决方案可以使用 <a href="https://www.npmjs.com/package/fastclick" target="_blank" rel="noopener noreferrer">fastClick库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/18/2020, 10:59:45 AM</span></div></footer> <!----> </main> <div class="valine-wrapper" data-v-0162251c><div id="valine" data-v-0162251c></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-d0bfeaa4 data-v-d0bfeaa4><i class="iconfont reco-up" data-v-d0bfeaa4></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.25bd69c4.js" defer></script><script src="/assets/js/4.6e0585f6.js" defer></script><script src="/assets/js/1.de0b2451.js" defer></script><script src="/assets/js/16.acb599d0.js" defer></script>
  </body>
</html>
